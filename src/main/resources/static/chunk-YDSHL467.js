import{c as u}from"./chunk-L3CJI6T3.js";import{c as d,d as c,g as h,i as v}from"./chunk-5LMRLIWH.js";var f=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}:host{display:block;height:100%}.sidebar__container{height:100%;overflow:auto}.sidebar__container.sidebar--open{border-right:1px solid var(--six-color-web-rock-300)}.sidebar__container:not(.sidebar--visible){position:absolute;width:1px;height:1px;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;pointer-events:none;visibility:hidden}.sidebar--left{color:var(--six-sidebar-color);background-color:var(--six-sidebar-background-color);transition:var(--six-transition-medium) margin-left;background-size:300vw 70%;background-position:bottom;background-repeat:no-repeat}.sidebar--right{transition:var(--six-transition-medium) margin-right}.sidebar--open.sidebar--left{margin-right:2px}.sidebar--open.sidebar--right{margin-left:2px}",m=f,p=l=>{var e;return((e=l?.tagName)===null||e===void 0?void 0:e.toLowerCase())==="six-sidebar-item-group"},x=(()=>{let l=class{constructor(e){v(this,e),this.sixShow=h(this,"six-sidebar-show",7),this.sixAfterShow=h(this,"six-sidebar-after-show",7),this.sixHide=h(this,"six-sidebar-hide",7),this.sixAfterHide=h(this,"six-sidebar-after-hide",7),this.sixInitialFocus=h(this,"six-sidebar-initial-focus",7),this.willShow=!1,this.willHide=!1,this.handleTransitionEnd=s=>{let t=s.target;s.type==="transitionend"&&t.classList.contains("sidebar__container")&&this.resetTransitionVariables()},this.closeSiblingDetailsOnShow=s=>{let t=s.target;this.sidebar!=null&&u(t,this.sidebar);let r=i=>{var o;let n=t;for(;i(n)!=null;)if(n=i(n),p(n)){let a=(o=n?.shadowRoot)===null||o===void 0?void 0:o.querySelector("six-details");a!=null&&(a.open=!1)}};r(i=>i?.previousElementSibling),r(i=>i?.nextElementSibling)},this.isVisible=!1,this.position="left",this.open=!1,this.width="16rem",this.toggled=!1}handleOpenChange(){this.open?this.show():this.hide()}componentWillLoad(){this.open&&(this.show(),this.resetTransitionVariables())}componentDidRender(){this.setupTogglableMenuItems()}disconnectedCallback(){var e;(e=this.sidebar)===null||e===void 0||e.removeEventListener("six-details-show",this.closeSiblingDetailsOnShow)}setupTogglableMenuItems(){!this.toggled||this.sidebar==null||(this.markAllMenuItemsAsSelectableEmpty(),this.sidebar.addEventListener("six-details-show",this.closeSiblingDetailsOnShow))}markAllMenuItemsAsSelectableEmpty(){var e;let s=(e=this.sidebar)===null||e===void 0?void 0:e.querySelector("slot"),t=s?.assignedElements()||[],r=[];for(;t.length>0;){let i=t.pop();if(i?.shadowRoot==null)continue;let o=i.shadowRoot.querySelectorAll("six-details");r.push(...o);let n=Array.from(i.children).filter(p);t.push(...n)}r.forEach(i=>i.selectableEmpty=!0)}toggle(){return d(this,null,function*(){this.willShow||this.willHide||(this.open?yield this.hide():yield this.show())})}show(){return d(this,null,function*(){if(this.willShow)return;if(this.sixShow.emit().defaultPrevented){this.open=!1;return}this.willShow=!0,this.isVisible=!0,this.open=!0})}hide(){return d(this,null,function*(){if(this.willHide)return;if(this.sixHide.emit().defaultPrevented){this.open=!0;return}this.willHide=!0,this.open=!1})}selectItemByIndex(e){return d(this,null,function*(){if(this.sidebar==null)return;let s=this.sidebar.querySelector("slot"),t=(s?.assignedElements()||[]).flatMap(r=>{var i;let o=(i=r.shadowRoot)===null||i===void 0?void 0:i.querySelector("six-details");return o==null?[]:[o]});if(e<0||e>t.length-1){console.error(`Tried to access sidebar menu item by index, but provided index out of range. Provided index: ${e}`);return}yield t[e].show()})}selectItemByName(e){return d(this,null,function*(){var s,t,r;let i=(s=this.sidebar)===null||s===void 0?void 0:s.querySelector("slot"),o=i?.assignedElements();if(o==null)return;let n=o.findIndex(b=>b?.name===e),a=(r=(t=o.at(n))===null||t===void 0?void 0:t.shadowRoot)===null||r===void 0?void 0:r.querySelector("six-details");yield a?.show()})}resetTransitionVariables(){this.isVisible=this.open,this.willShow=!1,this.willHide=!1,this.open?this.sixAfterShow.emit():this.sixAfterHide.emit()}render(){return c("host",{key:"9d2b3038cf6af596590bbe0392c5197d49ae9ba1",class:"six-sidebar"},c("div",{key:"81390d2ad8a8fc2d9e344a62197983d11b27d389",class:{sidebar__container:!0,"sidebar--visible":this.isVisible,"sidebar--open":this.open,"sidebar--left":this.position==="left","sidebar--right":this.position==="right"},style:{width:this.width,[`margin-${this.position}`]:this.open?"0":`calc(1rem - ${this.width})`},ref:e=>this.sidebar=e,"aria-hidden":this.open?"false":"true",onTransitionEnd:this.handleTransitionEnd},c("slot",{key:"e48036d762b116330fa687a71bb50ca87a8bed74"})))}static get watchers(){return{open:["handleOpenChange"]}}};return l.style=m,l})();export{x as six_sidebar};
